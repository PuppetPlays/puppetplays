<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>{{ title ?? 'Document PDF' }}</title>
		<style>
			/* Fuentes */
			@font-face {
				font-family: 'Fira Sans';
				font-style: normal;
				font-weight: 400;
				src: local(""), url("https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;500;700&display=swap");
			}

			@font-face {
				font-family: 'PT Serif';
				font-style: normal;
				font-weight: 700;
				src: local(""), url("https://fonts.googleapis.com/css2?family=PT+Serif:wght@700&display=swap");
			}

			/* Reset básico */
			* {
				box-sizing: border-box;
			}

			body,
			html {
				padding: 0;
				margin: 0;
				font-family: "Fira Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
				font-size: 16px;
				line-height: 1.5;
				color: #1a1b45;
				background-color: white;
			}

			/* Layout principal */
			.container {
				max-width: 1200px;
				margin: 0 auto;
				padding: 40px 20px;
			}

			/* Header de la obra */
			.work-header {
				text-align: center;
				margin-bottom: 40px;
				border-bottom: 2px solid #d9d9e0;
				padding-bottom: 30px;
			}

			.work-title {
				font-size: 35px;
				font-family: "PT Serif", "Georgia", "Times New Roman", serif;
				margin: 0 0 20px;
				color: #2037b1;
				line-height: 1.2;
			}

			.work-meta {
				font-size: 18px;
				font-weight: 500;
				margin: 0;
				color: #1a1b45;
			}

			.work-date {
				font-weight: 400;
				color: #1a1b45;
			}

			.work-place {
				font-size: 16px;
				font-weight: 400;
				color: #1a1b45;
			}

			.pipe-separator {
				color: #f0f0f3;
				margin: 0 8px;
				font-size: 16px;
				font-weight: 400;
			}

			/* Layout del contenido */
			.work-content {
				display: flex;
				flex-direction: row;
				margin-top: 40px;
			}

			/* Imagen de portada */
			.work-media {
				flex: 0 0 200px;
				margin-right: 36px;
				text-align: center;
				font-size: 14px;
				color: #1a1b45;
			}

			.work-media img {
				width: 100%;
				max-width: 150px;
				height: auto;
				border-radius: 7px;
			}

			.work-media p {
				margin: 8px 0 4px;
				text-align: center;
			}

			/* Contenido principal */
			.work-body {
				flex: 1;
				margin-right: 36px;
			}

			/* Información adicional */
			.work-extra {
				flex: 0 0 185px;
				font-size: 14px;
			}

			/* Secciones */
			.section {
				margin: 24px 0;
			}

			.section-title {
				border-top: 1px solid #b3b3c1;
				font-size: 11px;
				line-height: 1.2;
				color: #fff;
				text-transform: uppercase;
				margin: 20px 0 12px;
			}

			.section-title span {
				display: inline-block;
				background-color: #b3b3c1;
				border-radius: 0 0 3px 3px;
				padding: 4px 9px;
				letter-spacing: 0.0275em;
			}

			.section-content {
				font-size: 15px;
			}

			/* Información en cajas */
			.info-container {
				margin: 14px 0;
			}

			.info-container--filled {
				background-color: #f0f0f3;
				border-radius: 8px;
				padding: 15px;
			}

			.info-label {
				color: #595b78;
				font-size: 12px;
				margin-bottom: 5px;
				font-weight: 500;
			}

			.info-content {
				font-size: 15px;
			}

			.info-content a {
				text-decoration: underline;
				color: #2037b1;
			}

			/* Resumen */
			.abstract-title {
				font-size: 18px;
				color: #1a1b45;
				display: inline-block;
				margin: 0 0 8px;
				font-weight: 600;
			}

			/* Keywords/Tags */
			.keywords-container {
				display: flex;
				flex-wrap: wrap;
				margin: 0 0 16px;
				padding: 0;
				list-style-type: none;
			}

			.keywords-tag {
				padding: 6px 11px;
				border-radius: 15px;
				margin: 0 8px 8px 0;
				font-size: 13px;
				line-height: 1.1;
				color: #2037b1;
				background-color: #f0f0f3;
			}

			/* Párrafos */
			p {
				margin: 0 0 12px;
			}

			p:last-child {
				margin-bottom: 0;
			}

			/* Enlaces */
			a {
				color: inherit;
				text-decoration: none;
			}

			p > a {
				text-decoration: underline;
				color: #2037b1;
			}

			/* Listas */
			ul {
				margin: 0;
				padding-left: 20px;
			}

			li {
				margin: 4px 0;
			}

			/* Énfasis */
			em {
				font-style: italic;
			}

			strong {
				font-weight: 700;
			}
		</style>
	</head>
	<body>
		<div
			class="container">

			<!-- Header de la obra -->
			<header class="work-header">
				<h1 class="work-title">{{ title }}</h1>
				{% if entry.subtitle %}
					<h2 class="work-subtitle" style="font-size: 24px; font-weight: 500; margin: 0 0 15px 0; color: #1a1b45;">{{ entry.subtitle }}</h2>
				{% endif %}
				<div class="work-meta">
					{% if entry.authors.all()|length > 0 %}
						<span class="work-authors">
							{% set authorsList = [] %}
							{% for author in entry.authors.all() %}
								{% set authorsList = authorsList|merge([author.title]) %}
							{% endfor %}
							{{ authorsList|join(', ') }}
						</span>
					{% endif %}

					{% if entry.mostRelevantDate %}
						{% if entry.authors.all()|length > 0 %}
							<span class="pipe-separator">|</span>
						{% endif %}
						<span class="work-date">{{ entry.mostRelevantDate }}</span>
					{% else %}
						{% if entry.authors.all()|length > 0 %}
							<span class="pipe-separator">|</span>
						{% endif %}
						<span class="work-date">{{ entry.compositionMaxDate ?? entry.compositionMinDate ?? 'Fecha no disponible' }}</span>
					{% endif %}

					{% if entry.compositionPlace.all()|length > 0 %}
						<span class="pipe-separator">|</span>
						<span class="work-place">
							{% set place = entry.compositionPlace.one() %}
							{{ place.title }}
							{% if place.country.all()|length > 0 and place.country.one().title != place.title %}
								,
								{{ place.country.one().title }}
							{% endif %}
						</span>
					{% endif %}


					{% if entry.mainLanguage.all()|length > 0 %}
						<span class="pipe-separator">|</span>
						<span class="work-language">{{ entry.mainLanguage.one().title }}</span>
					{% endif %}
				</div>
			</header>


			<!-- Contenido principal -->
			<div
				class="work-content">
				<!-- Imagen y datos básicos -->
				<div class="work-media">
					<div class="cover-image"></div>
					<p>
						{% if entry.formats.all()|length > 0 %}
							{% set formatsList = [] %}
							{% for format in entry.formats.all() %}
								{% set formatsList = formatsList|merge([format.title]) %}
							{% endfor %}
							{{ formatsList|join(', ') }}
						{% elseif entry.medias.one() %}
							{{ entry.medias.one().title }}
						{% else %}
							Imprimé
						{% endif %}
					</p>
					<p>{{ entry.pagesCount ?? '' }}
						pages</p>
				</div>

				<!-- Contenido principal -->
				<div class="work-body">
					<section class="section">
						{% if entry.textCharacters.all()|length > 0 %}
							<div class="info-container">
								<div class="info-label">Personnages</div>
								<div class="info-content">
									{% set characterList = [] %}
									{% for character in entry.textCharacters.all() %}
										{% if character.type.handle == 'character' %}
											{% set characterName = character.nameInText %}
											{% if character.roles.all()|length > 0 %}
												{% set rolesList = [] %}
												{% for role in character.roles.all() %}
													{% set rolesList = rolesList|merge([role.title]) %}
												{% endfor %}
												{% set characterName = characterName ~ ' (' ~ rolesList|join(', ') ~ ')' %}
											{% endif %}
											{% set characterList = characterList|merge([characterName]) %}
										{% endif %}
									{% endfor %}
									{{ characterList|join(', ') }}
								</div>
							</div>
						{% endif %}

						<div class="info-container">
							<div class="info-label">Rédaction de la notice</div>
							<div class="info-content">{{ custom.author }}</div>
						</div>


						{% if entry.note %}
							<div class="info-container info-container--filled">
								<div class="info-label">Notice</div>
								<div class="info-content">
									{{ entry.note }}
								</div>
							</div>
						{% endif %}

						{% if entry.abstract %}
							<div class="info-container info-container--filled">
								<div class="info-label">Résumé</div>
								<div class="info-content">
									{{ entry.abstract|raw }}
								</div>
							</div>
						{% endif %}
					</section>

					{% if entry.firstPerformancePlace.one() or entry.firstPerformanceDate or entry.firstPerformanceComplementaryInformation %}
						<section class="section">
							<h2 class="section-title">
								<span>Première représentation</span>
							</h2>
							<div class="section-content">
								{% set hasPlace = entry.firstPerformancePlace.one() %}
								{% set hasDate = entry.firstPerformanceDate %}
								{% set hasExtraInfo = entry.firstPerformanceComplementaryInformation %}

								{% if hasPlace %}
									{% set place = entry.firstPerformancePlace.one() %}
									<span>
										{{ place.title }}
										{% if place.country.all()|length > 0 and place.country.one().title != place.title %}
											,
											{{ place.country.one().title }}
										{% endif %}
									</span>
								{% endif %}

								{% if hasPlace and (hasDate or hasExtraInfo) %},
								{% endif %}

								{% if hasDate %}
									<span>{{ entry.firstPerformanceDate }}</span>
								{% endif %}

								{% if hasDate and hasExtraInfo %}
									-
								{% endif %}

								{% if hasExtraInfo %}
									<div style="display: inline;">{{ entry.firstPerformanceComplementaryInformation|raw }}</div>
								{% endif %}
							</div>
						</section>
					{% endif %}

					{% if entry.publication or entry.modernEdition or entry.onlineCopy %}
						<section class="section">
							<h2 class="section-title">
								<span>Éditions et traductions</span>
							</h2>
							<div class="section-content">
								{% if entry.publication %}
									<div class="info-container">
										<div class="info-label">Édition</div>
										<div class="info-content">
											<p>{{ entry.publication }}</p>
										</div>
									</div>
								{% endif %}

								{% if entry.modernEdition %}
									<div class="info-container">
										<div class="info-label">Édition moderne</div>
										<div class="info-content">
											<p>{{ entry.modernEdition }}</p>
										</div>
									</div>
								{% endif %}

								{% if entry.onlineCopy %}
									<div class="info-container">
										<div class="info-label">Exemplaire en ligne</div>
										<div class="info-content">
											<a href="{{ entry.onlineCopy }}">{{ entry.onlineCopy }}</a>
										</div>
									</div>
								{% endif %}

								{% if entry.translations %}
									<div class="info-container">
										<div class="info-label">Traductions</div>
										<div class="info-content">
											{{ entry.translations }}
										</div>
									</div>
								{% endif %}
							</div>
						</section>
					{% endif %}

					{% if entry.conservationPlace.one() %}
						<section class="section">
							<h2 class="section-title">
								<span>Lieu de conservation</span>
							</h2>
							<div class="section-content">
								<span>{{ entry.conservationPlace.one().title }}</span>
							</div>
						</section>
					{% endif %}
				</div>

				<!-- Información adicional -->
				<div class="work-extra">
					<section class="section">
						{% if entry.mainLanguage.one() %}
							<div class="info-container">
								<div class="info-label">Langue</div>
								<div class="info-content">{{ entry.mainLanguage.one().title }}</div>
							</div>
						{% endif %}

						{% if entry.genre %}
							<div class="info-container">
								<div class="info-label">Genre (indiqué par l'auteur)</div>
								<div class="info-content">{{ entry.genre }}</div>
							</div>
						{% endif %}

						{% if entry.literaryTones.all()|length > 0 %}
							<div class="info-container">
								<div class="info-label">Registres littéraires</div>
								<div class="info-content">
									{% set tones = [] %}
									{% for litTone in entry.literaryTones.all() %}
										{% set tones = tones|merge([litTone.title]) %}
									{% endfor %}
									{{ tones|join(', ') }}
								</div>
							</div>
						{% endif %}

						{% if entry.animationTechniques.all()|length > 0 %}
							<div class="info-container">
								<div class="info-label">Techniques d'animation</div>
								<div class="info-content">
									{% set techniquesList = [] %}
									{% for technique in entry.animationTechniques.all() %}
										{% set techniquesList = techniquesList|merge([technique.title]) %}
									{% endfor %}
									{{ techniquesList|join(', ') }}
								</div>
							</div>
						{% endif %}

						{% if entry.audience.one() %}
							<div class="info-container">
								<div class="info-label">Public visé</div>
								<div class="info-content">{{ entry.audience.one().title }}</div>
							</div>
						{% endif %}

						<div class="info-container">
							<div class="info-label">Licence</div>
							<div class="info-content">Domaine public</div>
						</div>
					</section>

					{% if entry.keywords.all()|length > 0 %}
						<section class="section">
							<h2 class="section-title">
								<span>Mots-clés</span>
							</h2>
							<div class="section-content">
								<ul class="keywords-container">
									{% for keyword in entry.keywords.all() %}
										<li class="keywords-tag">{{ keyword.title }}</li>
									{% endfor %}
								</ul>
							</div>
						</section>
					{% endif %}

					{% if entry.theatricalTechniques %}
						<section class="section">
							<h2 class="section-title">
								<span>Procédés théâtraux</span>
							</h2>
							<div class="section-content">
								<ul class="keywords-container">
									{% for technique in entry.theatricalTechniques %}
										<li class="keywords-tag">{{ technique.title ?? technique }}</li>
									{% endfor %}
								</ul>
							</div>
						</section>
					{% endif %}

					{% if entry.editors %}
						<section class="section">
							<h2 class="section-title">
								<span>Rédaction de la notice</span>
							</h2>
							<div class="section-content">{{ entry.actsCount }}</div>
						</section>
					{% endif %}
				</div>
			</div>
		</body>
	</body>
</html></div></body></html>
